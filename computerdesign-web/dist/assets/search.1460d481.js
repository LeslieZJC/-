import{_ as k,d as S,e as f,o as i,c,f as u,w as m,a as o,h as P,t as y,l as V,r as A,m as F,n as a,q as I,s as N,F as j,v as H,k as b,H as L}from"./index.2d53c906.js";const R={class:"main-content"},T=["src"],G={style:{"font-size":"18px","font-weight":"500"}},J={style:{color:"gray"}},K={class:"info"},M=S({props:{title:String,score:Number,squareUrl:String,pos:String,info:String,id:Number,risks:String,riskstype:String},setup(t){const d=t;return(_,n)=>{const l=f("router-link"),v=f("el-badge"),p=f("el-rate");return i(),c("div",R,[u(l,{to:"/details?attractionId="+String(d.id),class:"left-content"},{default:m(()=>[o("img",{src:t.squareUrl},null,8,T)]),_:1},8,["to"]),u(l,{to:"/details?attractionId="+String(d.id),class:"right-content"},{default:m(()=>[o("div",G,[u(v,{value:t.risks,type:t.riskstype,class:"item"},{default:m(()=>[P(y(t.title),1)]),_:1},8,["value","type"])]),o("div",null,[u(p,{modelValue:t.score,"onUpdate:modelValue":n[0]||(n[0]=h=>V(score)?score.value=h:null),disabled:"","show-score":"","text-color":"#ff9900","score-template":"{value}"},null,8,["modelValue"])]),o("div",J,y(t.pos),1),o("div",K,y(t.info),1)]),_:1},8,["to"])])}}});var x=k(M,[["__scopeId","data-v-56274579"]]);function $(t,d){return new Promise((_,n)=>{A.get("/attraction/search?keyword="+t+"&currentPage="+d,{}).then(l=>{_(l)})})}const O={key:0,style:{height:"100%"}},Q={key:1,style:{height:"100%"}},W={class:"body"},X={class:"infinite-list-wrapper",style:{overflow:"auto"}},Y={class:"list","infinite-scroll-disabled":"disabled"},Z={class:"footer"},ee={class:"pagination-block"},te=S({setup(t){const _=F().query.keyword,n=a([]);a(""),a("");const l=a(1),v=a(1),p=a(1);$(_,1).then(r=>{const s=r.data;r.data.code===200&&(n.value=s.attractions.list,v.value=s.attractions.pageSize,p.value=s.attractions.totalCount)});const h=a(20),C=a(!0),w=()=>{C.value=!0,setTimeout(()=>{h.value+=2,C.value=!1},2e3)},q=a(!1),z=a(!0),U=r=>{console.log(`${r} items per page`)},E=r=>{console.log(`current page: ${r}`),$(_,l.value).then(s=>{const g=s.data;s.data.code===200&&(n.value=g.attractions.list,v.value=g.attractions.pageSize,p.value=g.attractions.totalCount,console.log("\u66F4\u6539\u5206\u9875\u540E\u6570\u636E",n.value))})};return(r,s)=>{const g=f("el-pagination"),B=I("infinite-scroll");return n.value.length===0?(i(),c("div",O," \u6CA1\u6709\u4EFB\u4F55\u5339\u914D\u7684\u7ED3\u679C\u54E6~ ")):(i(),c("div",Q,[o("div",W,[o("div",X,[N((i(),c("ul",Y,[(i(!0),c(j,null,H(n.value,(e,D)=>(i(),c("li",{key:D,class:"list-item"},[e.risks==1?(i(),b(x,{key:0,squareUrl:e.avate,title:e.title,info:e.info,score:e.score,pos:e.pos,id:e.id,risks:"\u9AD8\u98CE\u9669",riskstype:"danger"},null,8,["squareUrl","title","info","score","pos","id"])):(i(),b(x,{key:1,squareUrl:e.avate,title:e.title,info:e.info,score:e.score,pos:e.pos,id:e.id,risks:"\u5B89\u5168",riskstype:"success"},null,8,["squareUrl","title","info","score","pos","id"]))]))),128))])),[[B,w]])])]),o("div",Z,[o("div",ee,[u(g,{currentPage:l.value,"onUpdate:currentPage":s[0]||(s[0]=e=>l.value=e),"page-size":v.value,"onUpdate:page-size":s[1]||(s[1]=e=>v.value=e),small:q.value,background:z.value,layout:"prev, pager, next, jumper",total:p.value,onSizeChange:U,onCurrentChange:E},null,8,["currentPage","page-size","small","background","total"])])])]))}}});var se=k(te,[["__scopeId","data-v-760f1951"]]);const oe={class:"search"},ae={class:"top-bar"},ne={class:"attractions-list"},ie=S({setup(t){return(d,_)=>(i(),c("div",oe,[o("div",ae,[u(L)]),o("div",ne,[u(se)])]))}});var re=k(ie,[["__scopeId","data-v-18aae57f"]]);export{re as default};
