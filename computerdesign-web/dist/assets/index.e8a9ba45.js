import{r as P,_ as $,d as H,n as r,e as c,o as b,c as h,f as t,w as l,a as s,F as L,v as M,t as i,m as te,x as ae,H as le,h as _,E as q,y as oe}from"./index.2d53c906.js";function ne(d){return new Promise((u,n)=>{P.get("/attraction/details?attractionId="+d,{}).then(o=>{u(o)})})}function R(d,u){return new Promise((n,o)=>{P.get("/attraction/comments?attractionId="+d+"&currentPage="+u,{}).then(v=>{n(v)})})}function se(d){return new Promise((u,n)=>{P.get("/attraction/label?attractionId="+d,{}).then(o=>{u(o)})})}function ue(d){return new Promise((u,n)=>{P.post("/attraction/addcollect/"+String(d)).then(o=>{u(o)})})}function ce(d){return new Promise((u,n)=>{P.delete("/attraction/discollect/"+String(d)).then(o=>{u(o)})})}function re(d){return new Promise((u,n)=>{P.get("/attraction/recommndById/"+String(d)).then(o=>{u(o)})})}const de={class:"img-card"},ie=["src"],_e=H({props:{attractionId:Number},setup(d){const u=d,n=r("info"),o=r([]);return re(Number(u.attractionId)).then(v=>{console.log(v.data),v.data.code==200&&(o.value=v.data.attractions,console.log(o.value))}),(v,y)=>{const x=c("router-link"),N=c("el-tab-pane"),k=c("el-tabs");return b(),h("div",null,[t(k,{modelValue:n.value,"onUpdate:modelValue":y[0]||(y[0]=C=>n.value=C),type:"card",class:"demo-tabs"},{default:l(()=>[t(N,{label:"\u63A8\u8350",name:"info"},{default:l(()=>[s("div",de,[(b(!0),h(L,null,M(o.value,(C,V)=>(b(),h("div",{key:V},[t(x,{to:"/details?attractionId="+String(C.id),class:"attraction"},{default:l(()=>[s("img",{src:C.avate},null,8,ie),s("div",null,i(C.title),1)]),_:2},1032,["to"])]))),128))])]),_:1})]),_:1},8,["modelValue"])])}}});var me=$(_e,[["__scopeId","data-v-c986bcde"]]);const ve={class:"details"},pe={class:"top-bar"},ge={class:"attractions-list"},fe={class:"title"},be={key:0,style:{display:"flex","flex-wrap":"nowrap","align-items":"center",left:"60%"}},he={style:{color:"rgb(77, 73, 73)"}},ye=_("\u5DF2\u6536\u85CF"),Ce={key:1,style:{display:"flex","flex-wrap":"nowrap","align-items":"center",left:"60%"}},xe={style:{color:"rgb(77, 73, 73)"}},Ne=_("\u6536\u85CF"),Pe={style:{"margin-left":"40px","margin-top":"5px"}},ke={class:"demo-image__lazy"},Ie={class:"info"},ze={class:"comments"},we={class:"footer"},Ve={class:"pagination-block"},Ue=H({setup(d){const u=te(),n=r(u.query.attractionId),o=r(),v=r(""),y=r(""),x=r(1),N=r(),k=r(),C=r(!1),V=r(!0),z=r("info"),T=m=>{},G=m=>{R(Number(n.value),Number(x.value)).then(a=>{const p=a.data;p.code==200&&(U.value=p.PageUtils.list,k.value=p.PageUtils.totalCount,N.value=p.PageUtils.pageSize)})},U=r([]),g=r(),I=r(!1),J=()=>{I.value=!0,ue(Number(n.value)),q({message:"\u6536\u85CF\u6210\u529F.",type:"success"})},K=()=>{I.value=!1,ce(Number(n.value)),q({message:"\u53D6\u6D88\u6536\u85CF.",type:"success"})};function B(){se(Number(n.value)).then(m=>{const a=m.data;a.code===200&&(g.value=a.lable)}),ne(Number(n.value)).then(m=>{var a;o.value=m.data.details,((a=o.value)==null?void 0:a.risks)==1?(v.value="\u9AD8\u98CE\u9669",y.value="danger"):(v.value="\u5B89\u5168",y.value="success")}),R(Number(n.value),Number(x.value)).then(m=>{const a=m.data;a.code==200&&(U.value=a.PageUtils.list,k.value=a.PageUtils.totalCount,N.value=a.PageUtils.pageSize)}),oe().then(m=>{const a=m.data;if(a.code==200){for(let p=0;p<a.collection.length;p++)if(Number(n.value)===Number(a.collection[p].id)){I.value=!0;break}console.log("flag",I.value)}})}return B(),ae(()=>u.query.attractionId,(m,a)=>{n.value=m,B()}),(m,a)=>{var E,A;const p=c("el-tag"),O=c("star-filled"),S=c("el-icon"),D=c("el-button"),Q=c("star"),f=c("el-breadcrumb-item"),W=c("el-breadcrumb"),w=c("el-divider"),X=c("el-image"),F=c("el-tab-pane"),j=c("el-tabs"),Y=c("el-card"),Z=c("el-pagination");return b(),h("div",ve,[s("div",pe,[t(le)]),s("div",ge,[s("div",fe,[s("div",null,[_(i((E=o.value)==null?void 0:E.title)+" ",1),t(p,{type:y.value},{default:l(()=>[_(i(v.value),1)]),_:1},8,["type"])]),I.value?(b(),h("div",be,[t(S,{size:35},{default:l(()=>[t(O)]),_:1}),s("div",he,[t(D,{type:"text",size:"large",onClick:K},{default:l(()=>[ye]),_:1})])])):(b(),h("div",Ce,[t(S,{size:30},{default:l(()=>[t(Q)]),_:1}),s("div",xe,[t(D,{type:"text",size:"large",onClick:J},{default:l(()=>[Ne]),_:1})])]))]),s("div",Pe,[t(W,{separator:"/"},{default:l(()=>[t(f,null,{default:l(()=>{var e;return[_(i((e=g.value)==null?void 0:e.provinces),1)]}),_:1}),t(f,null,{default:l(()=>{var e;return[_(i((e=g.value)==null?void 0:e.sort),1)]}),_:1}),t(f,null,{default:l(()=>{var e;return[_(i((e=g.value)==null?void 0:e.theme1),1)]}),_:1}),t(f,null,{default:l(()=>{var e;return[_(i((e=g.value)==null?void 0:e.theme2),1)]}),_:1}),t(f,null,{default:l(()=>{var e;return[_(i((e=g.value)==null?void 0:e.theme3),1)]}),_:1}),t(f,null,{default:l(()=>{var e;return[_(i((e=g.value)==null?void 0:e.theme4),1)]}),_:1}),t(f,null,{default:l(()=>{var e;return[_(i((e=g.value)==null?void 0:e.theme5),1)]}),_:1}),t(f,null,{default:l(()=>{var e;return[_(i((e=g.value)==null?void 0:e.theme6),1)]}),_:1})]),_:1})]),t(w,{"border-style":"double"}),s("div",ke,[t(X,{src:(A=o.value)==null?void 0:A.avate,lazy:""},null,8,["src"])]),t(w,{"border-style":"double"}),s("div",null,[t(j,{modelValue:z.value,"onUpdate:modelValue":a[0]||(a[0]=e=>z.value=e),type:"card",class:"demo-tabs"},{default:l(()=>[t(F,{label:"\u4ECB\u7ECD",name:"info"},{default:l(()=>{var e;return[s("div",Ie,i((e=o.value)==null?void 0:e.info),1)]}),_:1})]),_:1},8,["modelValue"])]),t(w,{"border-style":"double"}),s("div",null,[t(j,{modelValue:z.value,"onUpdate:modelValue":a[3]||(a[3]=e=>z.value=e),type:"card",class:"demo-tabs"},{default:l(()=>[t(F,{label:"\u8BC4\u8BBA",name:"info"},{default:l(()=>[s("div",ze,[t(Y,{class:"box-card"},{default:l(()=>[(b(!0),h(L,null,M(U.value,(e,ee)=>(b(),h("div",{key:ee,class:"text item"},[_(i(e)+" ",1),t(w,{"border-style":"double"})]))),128))]),_:1}),s("div",we,[s("div",Ve,[t(Z,{currentPage:x.value,"onUpdate:currentPage":a[1]||(a[1]=e=>x.value=e),"page-size":N.value,"onUpdate:page-size":a[2]||(a[2]=e=>N.value=e),small:C.value,background:V.value,layout:"prev, pager, next, jumper",total:k.value,onSizeChange:T,onCurrentChange:G},null,8,["currentPage","page-size","small","background","total"])])])])]),_:1})]),_:1},8,["modelValue"])]),t(me,{attractionId:Number(n.value)},null,8,["attractionId"])])])}}});var Se=$(Ue,[["__scopeId","data-v-6eb18590"]]);export{Se as default};
